<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>You Can't Eat Cats Kevin - Game</title>

<style>
    body {
        background-color: #ffffff;
        color: #000000;
        font-family: "Times New Roman", serif;  
        padding: 20px;
        font-size: 22px;
        line-height: 1.7;
    }

    h1, h2, a {
        color: #000000;
    }

    .game-log {
        max-height: 35vh;
        overflow-y: auto;
        border: 3px solid #000;
        padding: 15px;
        margin-bottom: 25px;
        background: #fff;
        font-size: 22px;
        line-height: 1.7;
        white-space: pre-wrap;
    }

    .game-buttons { text-align: center; margin-top: 10px; margin-bottom: 20px; }

    button {
        margin: 10px;
        padding: 14px 26px;
        background-color: #000;
        color: #fff;
        border: 3px solid #000;
        border-radius: 6px;
        cursor: pointer;
        font-size: 20px;
        font-weight: bold;
        min-width: 180px;
        font-family: "Times New Roman", serif;
    }

    button:hover { background-color: #444; }

</style>
</head>
<body>

<h1>You Can't Eat Cats Kevin – The Game</h1>
<a href="index.html">⬅ Back to Home</a>

<!-- ============================
      ORIGINAL GAME
============================ -->
<div id="text" class="game-log"></div>
<div id="buttons" class="game-buttons"></div>

<script>
let moral = 100;
let lose_limit = 50;

const textEl = document.getElementById("text");
const buttonsEl = document.getElementById("buttons");

function log(msg) {
    textEl.innerHTML += msg + "\n";
    setTimeout(() => { textEl.scrollTop = textEl.scrollHeight; }, 30);
}

function showButtons(options) {
    buttonsEl.innerHTML = "";
    options.forEach(opt => {
        const btn = document.createElement("button");
        btn.textContent = opt.label;
        btn.onclick = opt.action;
        buttonsEl.appendChild(btn);
    });
}

function status_check() {
    if (moral <= lose_limit) {
        log("Your moral has dropped too low. The citizens start a revolution. You lose the game.");
        buttonsEl.innerHTML = "";
        return false;
    }
    return true;
}

function show_moral() { log("Moral: " + moral + "\n"); }

function moral_check() {
    if (moral >= 89) log("Citizens are thrilled\n");
    else if (moral >= 79) log("Citizens are happy\n");
    else if (moral >= 69) log("Citizens are ok\n");
    else if (moral >= 50) log("Citizens are worried\n");
}

function normal_event() {
    let roll = Math.random();
    let split = 0.09;
    let unite = 0.09;

    if (roll < split) {
        log("Citizens are splitting. This hurts moral.");
        let penalty = Math.floor(Math.random() * 6) + 3;
        moral -= penalty;
        log("Moral dropped by " + penalty);
    } else if (roll < split + unite) {
        log("Citizens unite. This improves moral.");
        let bonus = Math.floor(Math.random() * 6) + 3;
        moral += bonus;
        log("Moral increased by " + bonus);
    } else log("Citizens calm down. No change.");
}

function choice1() {
    log("Will you follow democracy?");
    showButtons([
        {label: "yes", action: () => { log("You follow democracy."); normal_event(); next(); }},
        {label: "no", action: () => { log("You deny democracy. Moral -20"); moral -= 20; next(); }}
    ]);
}

function choice2() {
    log("Focus on education over inflation?");
    showButtons([
        {label: "yes", action: () => { log("You choose education."); normal_event(); next(); }},
        {label: "no", action: () => { log("You focus on war & inflation. Moral -10"); moral -= 10; next(); }}
    ]);
}

function choice3() {
    log("Focus on terrorism instead of drugs/crime?");
    showButtons([
        {label: "yes", action: () => { let change = -(Math.floor(Math.random()*20)+1); moral += change; log("Citizens split. " + change); next(); }},
        {label: "no", action: () => { let change = -(Math.floor(Math.random()*20)+1); moral += change; log("Citizens split. " + change); next(); }}
    ]);
}

function choice4() {
    log("Allow the right to bear arms?");
    showButtons([
        {label: "yes", action: () => { 
            log("You allow gun rights.");
            if (Math.random() < 0.2) { let p = Math.floor(Math.random()*6)+3; moral -= p; log("Moral -" + p); }
            next(); 
        }},
        {label: "no", action: () => {
            log("You deny gun rights.");
            if (Math.random() < 0.2) { let p = Math.floor(Math.random()*6)+3; moral += p; log("Moral +" + p); }
            next();
        }}
    ]);
}

function choice5() {
    log("Your stance on the death penalty?");
    showButtons([
        {label:"anti-death", action:()=>{ log("You oppose it."); normal_event(); next(); }},
        {label:"pro-death",  action:()=>{ log("You support it."); normal_event(); next(); }}
    ]);
}

let step = 0;
function next() {
    if (!status_check()) return;
    moral_check();
    show_moral();
    step++;

    if (step===1) choice1();
    else if (step===2) choice2();
    else if (step===3) choice3();
    else if (step===4) choice4();
    else if (step===5) choice5();
    else { log("You finished the game!"); buttonsEl.innerHTML=""; }
}

log("RULES FOR A NEW WORLD\n");
log("You are the new leader. Keep moral above 50.\n");
next();
</script>

<!-- ============================
      PROJECT #2
============================ -->
<h2 style="margin-top:30px;">Shoot, Defend, Stand-off</h2>

<canvas id="sdsCanvas" width="600" height="260"
        style="border:3px solid black; background:#dedede; margin-bottom:15px;
               image-rendering: pixelated;">
</canvas>

<div class="status-box">
    <p>Your Health: <span id="sds-player-life">100</span></p>
    <p>Computer Health: <span id="sds-computer-life">100</span></p>
    <p>Your Power: <span id="sds-player-power">20</span></p>
    <p>Computer Power: <span id="sds-computer-power">20</span></p>
</div>

<div id="sds-buttons" class="game-buttons"></div>
<div id="sds-log" class="game-log"></div>

<script>
/* ============================
   GAME VARIABLES
============================ */
let sdsPlayerLife = 100;
let sdsComputerLife = 100;
let sdsPlayerPower = 20;
let sdsComputerPower = 20;

const sdsActions = ["shoot","defend","stand off"];
const sdsButtonsEl = document.getElementById("sds-buttons");
const sdsLogEl = document.getElementById("sds-log");

/* SMART AI */
function sdsSmartChoice(playerPower, computerPower, playerLife, computerLife) {
    if (computerPower >= playerLife) return "shoot";
    if (playerPower >= computerLife) return "defend";
    if (computerPower < 10) return Math.random() < 0.7 ? "stand off" : "defend";
    if (computerLife < 30) return Math.random() < 0.5 ? "defend" : "shoot";
    return ["shoot","defend","stand off"][Math.floor(Math.random()*3)];
}

/* Display update */
function sdsUpdateDisplay() {
    document.getElementById("sds-player-life").textContent = sdsPlayerLife;
    document.getElementById("sds-computer-life").textContent = sdsComputerLife;
    document.getElementById("sds-player-power").textContent = sdsPlayerPower;
    document.getElementById("sds-computer-power").textContent = sdsComputerPower;
}

function sdsLog(msg) {
    sdsLogEl.innerHTML += msg + "\n";
    setTimeout(()=>{ sdsLogEl.scrollTop = sdsLogEl.scrollHeight; },30);
}

function sdsShowButtons() {
    sdsButtonsEl.innerHTML = "";
    sdsActions.forEach(action=>{
        const btn=document.createElement("button");
        btn.textContent = action.toUpperCase();
        btn.onclick=()=>sdsPlayerAction(action);
        sdsButtonsEl.appendChild(btn);
    });
}

/* ===============================================
   PIXEL GRAPHICS ENGINE
================================================ */
const canvas = document.getElementById("sdsCanvas");
const ctx = canvas.getContext("2d");
ctx.imageSmoothingEnabled = false;

const playerX = 120;
const enemyX  = 480;
const groundY = 190;

let anim = { playerAction:"idle", enemyAction:"idle" };

function drawStatusBars(x,y,life,power,label){
    ctx.fillStyle="#000";
    ctx.fillRect(x-50,y-55,100,35);
    ctx.fillStyle="#fff";
    ctx.fillRect(x-48,y-53,96,31);

    ctx.fillStyle="#000";
    ctx.font="10px 'Courier New'";
    ctx.fillText(label,x-45,y-45);

    ctx.fillStyle="#ff4444";
    ctx.fillRect(x-45,y-40,(life/100)*90,6);

    ctx.fillStyle="#4444ff";
    ctx.fillRect(x-45,y-30,(power/100)*90,6);
}

function drawCharacter(x,action,facing){
    ctx.save();
    ctx.translate(x,groundY);
    if(facing==="left") ctx.scale(-1,1);

    ctx.fillStyle="#111";
    ctx.fillRect(-8,-20,16,20);

    ctx.fillStyle="#222";
    ctx.fillRect(-6,-33,12,12);

    if(action==="shoot"){
        ctx.fillStyle="red";
        ctx.fillRect(10,-15,40,3);
    }
    if(action==="defend"){
        ctx.fillStyle="cyan";
        ctx.fillRect(8,-22,5,22);
    }
    if(action==="stand"){
        ctx.strokeStyle="lime";
        ctx.lineWidth=2;
        ctx.strokeRect(-12,-37,24,40);
    }
    ctx.restore();
}

function renderBattle(){
    ctx.clearRect(0,0,canvas.width,canvas.height);

    drawStatusBars(playerX,groundY,sdsPlayerLife,sdsPlayerPower,"PLAYER");
    drawStatusBars(enemyX,groundY,sdsComputerLife,sdsComputerPower,"ENEMY");

    drawCharacter(playerX,anim.playerAction,"right");
    drawCharacter(enemyX,anim.enemyAction,"left");

    requestAnimationFrame(renderBattle);
}
renderBattle();

function animateAction(playerChoice,enemyChoice){
    anim.playerAction = playerChoice==="stand off" ? "stand" : playerChoice;
    anim.enemyAction  = enemyChoice==="stand off" ? "stand" : enemyChoice;

    setTimeout(()=>{
        anim.playerAction="idle";
        anim.enemyAction="idle";
    },500);
}

/* ===============================================
    COMBAT
================================================ */
const oldPlayerAction = sdsPlayerAction;
sdsPlayerAction = function(choice){
    if(sdsPlayerLife<=0 || sdsComputerLife<=0) return;

    const enemyChoice = sdsSmartChoice(
        sdsPlayerPower, sdsComputerPower, 
        sdsPlayerLife, sdsComputerLife
    );

    animateAction(choice, enemyChoice);

    oldPlayerAction(choice);
};

function sdsPlayerAction(choice){
    const enemyChoice = sdsSmartChoice(
        sdsPlayerPower, sdsComputerPower, 
        sdsPlayerLife, sdsComputerLife
    );

    sdsLog("Computer chose: " + enemyChoice);

    if (choice === 'shoot' && enemyChoice === 'shoot') {
        sdsPlayerLife -= sdsComputerPower;
        sdsComputerLife -= sdsPlayerPower;
    }
    else if (choice === 'shoot' && enemyChoice === 'defend') {
        sdsComputerLife -= Math.floor(sdsPlayerPower*0.05);
        sdsComputerPower += 5;
    }
    else if (choice === 'shoot' && enemyChoice === 'stand off') {
        sdsComputerLife -= sdsPlayerPower;
    }
    else if (choice === 'defend' && enemyChoice === 'shoot') {
        sdsPlayerLife -= Math.floor(sdsComputerPower*0.05);
        sdsPlayerPower += 5;
    }
    else if (choice === 'defend' && enemyChoice === 'stand off') {
        sdsComputerLife += 5;
        sdsComputerPower += 5;
    }
    else if (choice === 'stand off' && enemyChoice === 'shoot') {
        sdsPlayerLife -= sdsComputerPower;
    }
    else if (choice === 'stand off' && enemyChoice === 'defend') {
        sdsPlayerLife += 5;
        sdsPlayerPower += 5;
    }

    sdsUpdateDisplay();

    if (sdsPlayerLife <= 0) { sdsLog(" You lost!"); sdsButtonsEl.innerHTML=""; }
    else if (sdsComputerLife <= 0) { sdsLog(" You won!"); sdsButtonsEl.innerHTML=""; }
}

sdsUpdateDisplay();
sdsShowButtons();
</script>

</body>
</html>
